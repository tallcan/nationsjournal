/* global redux_change *//**
 * Typography
 * Dependencies		: google.com, jquery
 * Feature added by : Dovy Paukstys - http://simplerain.com/
 * Date				: 06.14.2013
 */jQuery.noConflict(),jQuery(document).ready(function(e){function t(t){var n=jQuery(t).parents(".redux-typography-container:first").attr("id");e(t).hasClass("redux-typography-family");var r=e("#"+n+" select.redux-typography-family").val(),i=e("#"+n+" .redux-typography-size").val(),s=e("#"+n+" .redux-typography-height").val(),o=e("#"+n+" select.redux-typography-style").val(),u=e("#"+n+" select.redux-typography-script").val(),a=e("#"+n+" .redux-typography-color").val(),f=e("#"+n).data("units"),l=e("#"+n+" .redux-typography-family option:selected"),c=l.data("google");e("#"+n).hasClass("typography-initialized")||(o=e("#"+n+" select.redux-typography-style").data("value"),u=e("#"+n+" select.redux-typography-script").data("value"),o!==""&&(o=String(o)),typeof u!==undefined&&(u=String(u)),e("#"+n).addClass("typography-initialized"));var h=jQuery.parseJSON(decodeURIComponent(l.data("details")));if(e(t).hasClass("redux-typography-family")){var p='<option value=""></option>';if(c){var d="";e.each(h.variants,function(e,t){t.id===o||Object.size(h.variants)===1?(d=' selected="selected"',o=t.id):d="",p+='<option value="'+t.id+'"'+d+">"+t.name.replace(/\+/g," ")+"</option>"}),e("#"+n+" .redux-typography-style").html(p),d="",p='<option value=""></option>',e.each(h.subsets,function(e,t){t.id===u||Object.size(h.subsets)===1?(d=' selected="selected"',u=t.id):d="",p+='<option value="'+t.id+'"'+d+">"+t.name.replace(/\+/g," ")+"</option>"}),e("#"+n+" .redux-typography-script").html(p)}else h&&(e.each(h,function(t,r){t===o||t==="normal"?(d=' selected="selected"',e("#"+n+" .typography-style .select2-chosen").text(r)):d="",p+='<option value="'+t+'"'+d+">"+r.replace("+"," ")+"</option>"}),e("#"+n+" .redux-typography-style").html(p))}e("#"+n+" select.redux-typography-style option[value='"+o+"']").length===0?(o="",e("#"+n+" select.redux-typography-style").val("")):o==="400"&&e("#"+n+" select.redux-typography-style").val(o),e("#"+n+" select.redux-typography-script option[value='"+u+"']").length===0&&(u="",e("#"+n+" select.redux-typography-script").val(""));var v="style_link_"+n;if(r){if(r!=="none"&&r!==""){e("."+v).remove();var m=r.replace(/\s+/g,"+");if(c){var g="http://fonts.googleapis.com/css?family="+m;o&&(g+=":"+o.replace(/\-/g," ")),u&&(g+="&subset="+u),e("head").append('<link href="'+g+'" rel="stylesheet" type="text/css" class="'+v+'">'),e("#"+n+" .redux-typography-google").val(!0)}else e("#"+n+" .redux-typography-google").val(!1);e("#"+n+" .typography-preview").css("font-size",i+f),e("#"+n+" .typography-preview").css("font-style","normal");if(o!==null&&o.indexOf("-")!==-1){var y=o.split("-");e("#"+n+" .typography-preview").css("font-weight",y[0]),e("#"+n+" .typography-preview").css("font-style",y[1])}else c||e("#"+n+" .typography-preview").css("font-weight",o),e("#"+n+" .typography-preview").css("font-style",o);e("#"+n+" .typography-preview").css("font-family",r+", sans-serif")}else e("#"+n+" .typography-preview").css("font-family","");s?e("#"+n+" .typography-preview").css("line-height",s+f):e("#"+n+" .typography-preview").css("line-height",i+f),e("#"+n+" .typography-preview").css("color",a)}e("#"+n+" .typography-style .select2-chosen").text(e("#"+n+" .redux-typography-style option:selected").text()),e("#"+n+" .typography-script .select2-chosen").text(e("#"+n+" .redux-typography-script option:selected").text())}Object.size=function(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t},jQuery(".redux-typography-container").each(function(){var e=jQuery(this).find(".redux-typography-family");e.data("value")!==""&&jQuery(e).val(e.data("value")),t(e)}),jQuery(".redux-typography").on("change",function(){t(this)}),jQuery(".redux-typography-size, .redux-typography-height").keyup(function(){t(this)}),e(".redux-typography-color").wpColorPicker({change:function(e,n){redux_change(jQuery(this)),jQuery(this).val(n.color.toString()),t(jQuery(this))}}),jQuery(".redux-typography-size, .redux-typography-height").numeric({negative:!1}),jQuery(".redux-typography-family").select2({width:"resolve",triggerChange:!0,allowClear:!0})});